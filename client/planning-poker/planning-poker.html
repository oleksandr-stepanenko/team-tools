<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planning Poker</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="/shared/theme-toggle.js"></script>
    <script src="/shared/header.js" type="text/javascript" defer></script>
    <script src="/shared/footer.js" type="text/javascript" defer></script>
</head>

<body>
    <!-- Site Header with Navigation -->
    <app-header></app-header>

    <div class="content-wrapper">
        <div class="container">
            <div id="active-poker-room-section" class="hidden">
                <div class="room-header">
                    <h2><i class="fas fa-door-open"></i> Poker Room: <span id="current-poker-room-id"></span></h2>
                    <div class="room-actions">
                        <button id="copy-room-btn" class="btn small"><i class="fas fa-copy"></i> Copy</button>
                        <button id="share-room-btn" class="btn small"><i class="fas fa-share-alt"></i> Share</button>
                    </div>
                </div>
            </div>
            <!-- Planning Poker Room Info -->
            <div id="poker-room-info">
                <div id="poker-welcome-section">
                    <p class="welcome-text">Join a planning poker session to estimate user stories with your team</p>
                    <div id="poker-name-input-section">
                        <div class="form-group">
                            <label for="user-name-input">Your Name:</label>
                            <input type="text" id="user-name-input" placeholder="Enter your name">
                        </div>
                    </div>
                    <div class="button-group">
                        <button id="create-poker-room-btn" class="btn primary"><i class="fas fa-plus-circle"></i> Create
                            Poker Room</button>
                        <div class="join-room-container">
                            <input type="text" id="poker-room-id-input" placeholder="Enter Room ID">
                            <button id="join-poker-room-btn" class="btn success"><i class="fas fa-sign-in-alt"></i> Join
                                Room</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Planning Poker Board -->
            <main id="planning-poker-board" class="hidden">
                <div class="poker-controls compact">
                    <div class="poker-controls-left">
                        <div class="poker-cards-container" id="poker-cards-container">
                            <div class="poker-card" data-value="1">1</div>
                            <div class="poker-card" data-value="2">2</div>
                            <div class="poker-card" data-value="3">3</div>
                            <div class="poker-card" data-value="5">5</div>
                            <div class="poker-card" data-value="8">8</div>
                            <div class="poker-card" data-value="13">13</div>
                            <div class="poker-card" data-value="21">21</div>
                            <div class="poker-card" data-value="?">?</div>
                            <div class="poker-card" data-value="☕">☕</div>
                        </div>

                        <div class="poker-results hidden" id="poker-results">
                            <h3>Voting Results</h3>
                            <div id="results-list" class="results-list">
                                <!-- Results will be added dynamically -->
                            </div>
                            <div id="results-summary" class="results-summary">
                                <!-- Summary will be added dynamically -->
                            </div>
                        </div>
                    </div>

                    <div class="poker-controls-right">
                        <div class="poker-controls-buttons">
                            <button id="reveal-cards-btn" class="btn secondary"><i class="fas fa-eye"></i> Reveal
                                Cards</button>
                            <button id="reset-voting-btn" class="btn primary"><i class="fas fa-redo"></i> Reset
                                Voting</button>
                        </div>

                        <div class="poker-participants" id="poker-participants">
                            <h3>Participants</h3>
                            <div id="participants-list" class="participants-list">
                                <!-- Participants will be added dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Notification -->
            <div id="notification" class="notification hidden"></div>

            <!-- Share Dialog -->
            <div id="share-dialog" class="share-dialog">
                <div class="share-dialog-content">
                    <div class="share-dialog-header">
                        <h3><i class="fas fa-share-alt"></i> Share Poker Room</h3>
                        <button id="close-share-dialog" class="close-modal"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="share-dialog-body">
                        <p>Copy this link to share with your team members:</p>
                        <div class="share-link-container">
                            <input type="text" id="share-link" class="share-link" readonly>
                            <button id="copy-share-link-btn" class="copy-share-link-btn"><i
                                    class="fas fa-copy"></i></button>
                        </div>
                        <p class="share-info">When they open this link, they'll be taken directly to your Planning Poker
                            room.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Site Footer -->
    <app-footer></app-footer>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="/planning-poker/planning-poker.js"></script>
</body>

</html>